/* 
* jQuery MTemplateJS - v0.0.19 
* Template library. 
* https://github.com/MpStyle/jquery-mtemplatejs 
* 
* Powered by Michele Pagnin 
* Licensed under a LGPL 3.0 license 
* http://www.gnu.org/licenses/lgpl-3.0.html 
*/ 

!function(a){var b=function(){function a(){this.directives={},this.beforeExecution=function(){},this.afterExecution=function(){},this.beforeAppendItem=function(a){},this.afterAppendItem=function(a){}}return a}(),c=function(){function c(c,d,e){this.option=new b,this.subTemplates={},this.currentElement=c,this.$currentElement=a(this.currentElement),this.data=d,this.option=e?e:new b}return c.prototype.run=function(){var b=this,d=this.$currentElement.attr(c.MT_USE),e=this.$currentElement.attr(c.MT_LOAD);e&&a.get(e,function(c){b.$template=a(c),b.manageData()},"html"),d&&(this.$template=a(a("#"+d).html()),this.manageData())},c.prototype.manageData=function(){var b=this;a(this.data).each(function(a,c){b.manage(c)})},c.prototype.manage=function(b){var d=this.$template.clone(),e=c.UUIDGenerator();d=a("<div>").attr("id",e).append(d),this.manageDirectives(b,d),this.manageRecord(b,d),this.append(d),this.manageSubTemplate()},c.prototype.append=function(b){var c=b.html(),d=a(c);switch(this.option.beforeAppendItem&&this.option.beforeAppendItem(d),this.option.effect){case"fade":d.hide().appendTo(this.$currentElement).fadeIn(this.option.effectDuration);break;default:this.$currentElement.append(b.html())}this.option.afterAppendItem&&this.option.afterAppendItem(d)},c.prototype.manageSubTemplate=function(){var b=this;a.each(b.subTemplates,function(d,e){var f=c.queryGenerator(c.MT_SUBTEMPLATE);a(f).each(function(a,d){new c(d,c.arrayGenerator(e),b.option).run()})})},c.prototype.manageDirectives=function(a,b){var d=this;for(var e in this.option.directives)this.apply(b,c.MT_FUNC,function(b,c){var e=d.option.directives[b];e&&e(c,a)})},c.prototype.manageRecord=function(a,b){var d=this;this.apply(b,c.MT_TEXT,function(b,c){c.html(d.returnValue(a,b))}),this.apply(b,c.MT_CLASS,function(b,c){c.addClass(d.returnValue(a,b))}),this.apply(b,c.MT_DATA,function(b,e){var f=c.UUIDGenerator();e.attr(c.MT_SUBTEMPLATE,f),d.subTemplates[f]=d.returnValue(a,b)}),c.ATTRIBUTES.forEach(function(c){d.manageAttribute(b,a,c)})},c.prototype.manageAttribute=function(a,b,c){var d=this;this.apply(a,"data-mt-"+c,function(a,e){e.attr(c,d.returnValue(b,a))})},c.prototype.apply=function(b,d,e){var f=c.queryGenerator(d),g=b.find(f);g.each(function(b,c){e(a(c).attr(d),a(c))})},c.prototype.returnValue=function(a,b){for(var c=b.split("."),d=a,e=0;e<c.length;e++)d=d[c[e]];return d},c.queryGenerator=function(a){return"["+a+"]"},c.arrayGenerator=function(a){var b=a;return Array.isArray(b)===!1&&(b=[b]),b},c.UUIDGenerator=function(){return"a"+(16777216*(1+Math.random())|0).toString(16).substring(1)},c.MT_LOAD="data-mt-load",c.MT_USE="data-mt-use",c.MT_TEXT="data-mt-text",c.MT_DATA="data-mt-data",c.MT_CLASS="data-mt-class",c.MT_SUBTEMPLATE="data-mt-subtemplate",c.ATTRIBUTES=["href","src","title","alt"],c.MT_FUNC="data-mt-func",c}();a.fn.mtemplatejs=function(a,b){b.beforeExecution&&b.beforeExecution();var d=this.each(function(d,e){new c(e,c.arrayGenerator(a),b).run()});return b.afterExecution&&b.afterExecution(),d}}(jQuery);