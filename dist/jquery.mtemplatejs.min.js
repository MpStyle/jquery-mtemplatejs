/* 
* jQuery MTemplateJS - v0.0.10 
* Template library. 
* https://github.com/MpStyle/jquery-mtemplatejs 
* 
* Powered by Michele Pagnin 
* Licensed under a LGPL 3.0 license 
* http://www.gnu.org/licenses/lgpl-3.0.html 
*/ 

!function(a){var b=function(){function b(b,c,d){this.subTemplates={},this.currentElement=b,this.$currentElement=a(this.currentElement),this.data=c,this.directives=d}return b.prototype.run=function(){var c=this,d=this.$currentElement.attr(b.MT_USE),e=this.$currentElement.attr(b.MT_LOAD);e&&a.get(e,function(b){c.$template=a(b),c.manageData()},"html"),d&&(this.$template=a(a("#"+d).html()),this.manageData())},b.prototype.manageData=function(){var b=this;a(this.data).each(function(a,c){b.manage(c)})},b.prototype.manage=function(c){var d=this.$template.clone(),e=b.UUIDGenerator();d=a("<div>").attr("id",e).append(d),this.manageDirectives(c,d),this.manageRecord(c,d),this.$currentElement.append(d.html()),this.$currentElement.removeAttr(b.MT_LOAD),this.$currentElement.removeAttr(b.MT_USE),this.manageSubTemplate()},b.prototype.manageSubTemplate=function(){var c=this;a.each(c.subTemplates,function(d,e){var f=b.queryGenerator(b.MT_SUBTEMPLATE,d);a(f).each(function(a,d){new b(d,b.arrayGenerator(e),c.directives).run(),d.removeAttribute(b.MT_SUBTEMPLATE)})})},b.prototype.manageDirectives=function(a,c){var d=this,e=function(e){f.apply(c,b.MT_FUNC,e,function(b){var c=d.directives[e];c&&c(b,a)})},f=this;for(var g in this.directives)e(g)},b.prototype.manageRecord=function(a,c){var d=this,e=function(e){var g=e;f.apply(c,b.MT_TEXT,g,function(b){b.html(a[g])}),f.apply(c,b.MT_CLASS,g,function(b){b.addClass(a[g])}),f.apply(c,b.MT_DATA,g,function(c){var e=b.UUIDGenerator();c.attr(b.MT_SUBTEMPLATE,e),d.subTemplates[e]=a[g]}),b.ATTRIBUTES.forEach(function(b){d.manageAttribute(c,g,a,b)})},f=this;for(var g in a)e(g)},b.prototype.manageAttribute=function(a,b,c,d){this.apply(a,"data-mt-"+d,b,function(a){a.attr(d,c[b])})},b.prototype.apply=function(c,d,e,f){var g=b.queryGenerator(d,e),h=c.find(g);h.each(function(b,c){f(a(c)),a(c).removeAttr(d)})},b.queryGenerator=function(a,b){return"*["+a+"="+b+"]"},b.arrayGenerator=function(a){var b=a;return Array.isArray(b)===!1&&(b=[b]),b},b.UUIDGenerator=function(){var a=(new Date).getTime();return b.UUID_TEMPLATE.replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})},b.MT_LOAD="data-mt-load",b.MT_USE="data-mt-use",b.MT_TEXT="data-mt-text",b.MT_DATA="data-mt-data",b.MT_CLASS="data-mt-class",b.MT_SUBTEMPLATE="data-mt-subtemplate",b.ATTRIBUTES=["href","src","title","alt"],b.MT_FUNC="data-mt-func",b.UUID_TEMPLATE="axx-xxx-xxx",b}();a.fn.mtemplatejs=function(a,c){return this.each(function(d,e){new b(e,b.arrayGenerator(a),c).run()})}}(jQuery);