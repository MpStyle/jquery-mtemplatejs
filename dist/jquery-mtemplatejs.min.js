!function(a){var b=function(){function b(c,d,e){this.currentElement=c,this.$currentElement=a(this.currentElement),this.templateName=this.$currentElement.attr(b.MT_USE),this.$template=a(a("[mt="+this.templateName+"]").html()),this.data=d,this.directives=e}return b.prototype.run=function(){var b=this;Array.isArray(this.data)?a(this.data).each(function(a,c){b.manage(c)}):b.manage(this.data)},b.prototype.manage=function(c){var d=this.$template.clone(),e=b.generateUUID();d=a("<div>").attr("id",e).append(d),this.manageDirectives(c,d),this.manageRecord(c,d),this.$currentElement.append(d.html())},b.prototype.manageDirectives=function(a,c){var d=this;for(var e in this.directives)this.apply(c,"*["+b.MT_FUNC+"="+e+"]",function(b){var c=d.directives[e];"undefined"!=typeof c&&c(b,a)})},b.prototype.manageRecord=function(a,c){for(var d in a)this.apply(c,"*["+b.MT_TEXT+"="+d+"]",function(b){b.html(a[d])}),this.apply(c,"*["+b.MT_CLASS+"="+d+"]",function(b){b.addClass(a[d])}),this.apply(c,"*["+b.MT_HREF+"="+d+"]",function(b){b.attr("href",a[d])})},b.prototype.apply=function(b,c,d){var e=b.find(c);e.each(function(b,c){d(a(c))})},b.generateUUID=function(){var a=(new Date).getTime(),b="axx-xxx-xxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b},b.MT_USE="mt-use",b.MT_TEXT="mt-text",b.MT_CLASS="mt-class",b.MT_HREF="mt-href",b.MT_FUNC="mt-func",b}();a.fn.mtemplatejs=function(a,c){return this.each(function(d,e){new b(e,a,c).run()})}}(jQuery);